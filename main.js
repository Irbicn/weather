(()=>{"use strict";const e=async({id:e=null,cityName:t=null,stateCode:n=null,position:a={lat:null,lon:null}||null,key:o=console.error("debe tener una Apikey")})=>{let r="https://api.openweathermap.org/data/2.5/weather?";e&&(r+=`id=${e}`),t&&(r+=`q=${t}`),n&&(r+=`,${n}`),a.lat&&a.lon&&(r=`https://api.openweathermap.org/data/2.5/weather?lat=${a.lat}&lon=${a.lon}`),r+=`&appid=${o}&lang=es`;const d=await fetch(r);return await d.json()};(async({appNode:t,plugins:n=[],key:a})=>{const o=t;o.className="app";const r=a;let d,s,c;const i={get app(){return o},set data(e){d=e},get data(){return d},set country(e){s=e},get country(){return s},get key(){return r},set render(e){c=e},get render(){return c}};n.map((e=>e.run(i))),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((async function(t){c.loading(!0),d=await e({position:{lat:t.coords.latitude,lon:t.coords.longitude},key:a}),c.add()}),(e=>{c.error(e.code)}))})({key:"a588056cf21a310b19bb34b37d017a9b",appNode:document.getElementById("app"),plugins:[(()=>{let e;const t={run(t){e=t,a()}},n=t=>{e.country=t.target.value},a=()=>{const t=document.createElement("form");t.className="form";const a=document.createElement("input");a.autofocus=!0,a.placeholder="Pais o Ciudad",a.className="input",a.oninput=n,t.appendChild(a),e.app.appendChild(t)};return t})(),(()=>{let t;const n={run(e){t=e,a()}},a=()=>{const e=document.createElement("button");e.className="input-send",e.textContent="search",e.onclick=o,t.app.firstChild&&t.app.firstChild.appendChild(e)},o=async n=>{n.preventDefault(),t.render.notFound(!1),t.render.loading(!0);const a=await e({cityName:t.country,key:t.key});if(!a.name)return t.render.loading(!1),void t.render.notFound(!0);t.data=a,t.render.add()};return n})(),(()=>{const e=document.createElement("div");e.className="weather";const t=document.createElement("p");t.className="loading",t.textContent="Loading...";const n=document.createElement("div");let a,o;n.className="error-notFound",n.textContent="no se encontro la busqueda";const r={run(t){o=t,o.render=d,o.app.appendChild(e)}},d={add(){a&&(a.remove(),a=null);const n=(e=>{const t=Math.round(3.6*e.wind.speed),n=Math.round(e.main.temp-273.15),a=document.createElement("div");return a.className="weather-card",a.innerHTML=`\n            <h3 class="weather-card-name">${e.name}</h3>\n            <span class="weather-card-temp">${n}<span>Â°C</span></span>\n            <img height="70" width="70" src="${o=e.weather[0].icon,`https://openweathermap.org/img/wn//${o}.png`}" alt="${e.weather[0].description}" class="weather-card-img"/>\n            <span>Humedad: ${e.main.humidity}%</span>\n            <span>Viento: ${t} Km/h</span>\n            <p class="weather-card-desc">${e.weather[0].description}</p>\n            `,a;var o})(o.data),r=document.body.offsetWidth;if(t.remove(),r<=420&&(e.innerHTML="",e.appendChild(n)),e.children.length>=2)return e.lastChild.remove(),void e.prepend(n);e.prepend(n)},loading(e){e?o.app.appendChild(t):t.remove()},notFound(e){if(e)return o.app.appendChild(n),void setTimeout((()=>{n.remove()}),2500);n.remove()},error(t){const n=document.createElement("div");n.className="location-error";const o=document.createElement("p");switch(n.appendChild(o),t.code){case t.PERMISSION_DENIED:o.textContent="Porfavor Permite el acceso a tu ubicacion solo si quieres que se muestre automaticamente el clima donde estas o procede a buscar el clima de algun lugar";break;case t.POSITION_UNAVAILABLE:o.textContent="No hemos encontrado tu ubicacion, no hay nada que hacer al respecto";break;case t.TIMEOUT:o.textContent="Se a tardado demasiado en obtener tu ubicacion, revisa tu conexion a internet o intentalo mas tarde";break;case t.UNKNOWN_ERROR:o.textContent="Si ves esto no tengo idea de lo que pasa. Procede, si puedes, a buscar el clima de algun lugar"}a=n,e.appendChild(n)}};return r})()]})})();